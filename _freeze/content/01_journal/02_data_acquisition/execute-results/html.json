{
  "hash": "8b3304c829926b80481ef7eaee27fb0a",
  "result": {
    "markdown": "---\ntitle: \"Data Acquisition\"\nauthor: \"Andreas Jessen\"\n---\n\n\n# Challenge 1 - Get Data via API\n\nFor the first challenge I got weather forecast data for Killer, Baden-Württemberg from the DWD.\n\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-1_3873a6f5db1ac7163a50f79f06347913'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(httr)\nlibrary(jsonlite)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attache Paket: 'jsonlite'\n#> \n#> Das folgende Objekt ist maskiert 'package:purrr':\n#> \n#>     flatten\n```\n:::\n\n```{.r .cell-code}\nresp <- GET('https://dwd.api.proxy.bund.dev/v30/stationOverviewExtended?stationIds=10865')\n\nforecast_list <- resp %>% \n  .$content %>% \n  rawToChar() %>% \n  fromJSON()\n\nforecast_tbl <- forecast_list[[\"10865\"]][[\"days\"]]\n\nforecast_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"stationId\"],\"name\":[1],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"dayDate\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"temperatureMin\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"temperatureMax\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"icon\"],\"name\":[5],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"icon1\"],\"name\":[6],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"icon2\"],\"name\":[7],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"precipitation\"],\"name\":[8],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"windSpeed\"],\"name\":[9],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"windGust\"],\"name\":[10],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"windDirection\"],\"name\":[11],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"sunshine\"],\"name\":[12],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"sunrise\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sunset\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moonrise\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moonset\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"moonPhase\"],\"name\":[17],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"NA\",\"2\":\"2023-05-24\",\"3\":\"100\",\"4\":\"132\",\"5\":\"7\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"18\",\"9\":\"93\",\"10\":\"259\",\"11\":\"3600\",\"12\":\"0\",\"13\":\"1.684899e+12\",\"14\":\"1.684955e+12\",\"15\":\"1.684911e+12\",\"16\":\"1.684971e+12\",\"17\":\"1\",\"_rn_\":\"1\"},{\"1\":\"NA\",\"2\":\"2023-05-25\",\"3\":\"95\",\"4\":\"204\",\"5\":\"7\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"8\",\"9\":\"148\",\"10\":\"333\",\"11\":\"670\",\"12\":\"3780\",\"13\":\"1.684985e+12\",\"14\":\"1.685041e+12\",\"15\":\"1.685002e+12\",\"16\":\"1.685059e+12\",\"17\":\"1\",\"_rn_\":\"2\"},{\"1\":\"NA\",\"2\":\"2023-05-26\",\"3\":\"113\",\"4\":\"216\",\"5\":\"2\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"130\",\"10\":\"333\",\"11\":\"570\",\"12\":\"6420\",\"13\":\"1.685071e+12\",\"14\":\"1.685128e+12\",\"15\":\"1.685092e+12\",\"16\":\"1.685059e+12\",\"17\":\"1\",\"_rn_\":\"3\"},{\"1\":\"NA\",\"2\":\"2023-05-27\",\"3\":\"108\",\"4\":\"228\",\"5\":\"1\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"148\",\"10\":\"352\",\"11\":\"670\",\"12\":\"7560\",\"13\":\"1.685158e+12\",\"14\":\"1.685214e+12\",\"15\":\"1.685183e+12\",\"16\":\"1.685147e+12\",\"17\":\"1\",\"_rn_\":\"4\"},{\"1\":\"NA\",\"2\":\"2023-05-28\",\"3\":\"110\",\"4\":\"228\",\"5\":\"1\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"111\",\"10\":\"296\",\"11\":\"550\",\"12\":\"7800\",\"13\":\"1.685244e+12\",\"14\":\"1.685300e+12\",\"15\":\"1.685273e+12\",\"16\":\"1.685234e+12\",\"17\":\"2\",\"_rn_\":\"5\"},{\"1\":\"NA\",\"2\":\"2023-05-29\",\"3\":\"121\",\"4\":\"225\",\"5\":\"1\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"111\",\"10\":\"333\",\"11\":\"430\",\"12\":\"6480\",\"13\":\"1.685330e+12\",\"14\":\"1.685387e+12\",\"15\":\"1.685364e+12\",\"16\":\"1.685322e+12\",\"17\":\"2\",\"_rn_\":\"6\"},{\"1\":\"NA\",\"2\":\"2023-05-30\",\"3\":\"122\",\"4\":\"211\",\"5\":\"2\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"111\",\"10\":\"315\",\"11\":\"480\",\"12\":\"5100\",\"13\":\"1.685417e+12\",\"14\":\"1.685473e+12\",\"15\":\"1.685454e+12\",\"16\":\"1.685409e+12\",\"17\":\"2\",\"_rn_\":\"7\"},{\"1\":\"NA\",\"2\":\"2023-05-31\",\"3\":\"118\",\"4\":\"213\",\"5\":\"2\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"130\",\"10\":\"315\",\"11\":\"620\",\"12\":\"5640\",\"13\":\"1.685503e+12\",\"14\":\"1.685560e+12\",\"15\":\"1.685545e+12\",\"16\":\"1.685496e+12\",\"17\":\"2\",\"_rn_\":\"8\"},{\"1\":\"NA\",\"2\":\"2023-06-01\",\"3\":\"125\",\"4\":\"220\",\"5\":\"2\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"111\",\"10\":\"296\",\"11\":\"480\",\"12\":\"5760\",\"13\":\"1.685590e+12\",\"14\":\"1.685646e+12\",\"15\":\"1.685636e+12\",\"16\":\"1.685584e+12\",\"17\":\"3\",\"_rn_\":\"9\"},{\"1\":\"NA\",\"2\":\"2023-06-02\",\"3\":\"134\",\"4\":\"221\",\"5\":\"2\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"0\",\"9\":\"111\",\"10\":\"333\",\"11\":\"3460\",\"12\":\"4320\",\"13\":\"1.685676e+12\",\"14\":\"1.685733e+12\",\"15\":\"1.685727e+12\",\"16\":\"1.685671e+12\",\"17\":\"3\",\"_rn_\":\"10\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n# Challenge 2 - Scrape Website\n\nFor the second challenge I scraped the name and the price of the bikes in the mtb category on the rosebikes.de website.\n\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-2_f2f706f23ed7aeef7354a5ae5193e0c1'}\n\n```{.r .cell-code}\n# WEBSCRAPING ----\n\n# 1.0 LIBRARIES ----\n\nlibrary(tidyverse) # Main Package - Loads dplyr, purrr, etc.\nlibrary(rvest)     # HTML Hacking & Web Scraping\nlibrary(xopen)     # Quickly opening URLs\nlibrary(jsonlite)  # converts JSON files to R objects\nlibrary(glue)      # concatenate strings\nlibrary(stringi)   # character string/text processing\n\n# 1.1 COLLECT PRODUCT FAMILIES ----\n\nurl_home          <- \"https://www.rosebikes.de/fahrr%C3%A4der/mtb\"\n\n# Read in the HTML for the entire webpage\nhtml_home         <- read_html(url_home)\n\n# Web scrape the bike names\nbike_name_tbl <- html_home %>%\n  \n  # Get the nodes\n  html_nodes(css = \".catalog-category-bikes__content\") %>%\n  \n  html_nodes(css = \".basic-headline__title\") %>%\n  \n  html_text() %>%\n  \n  # Convert vector to tibble\n  enframe(name = \"position\", value = \"bike_name\") #%>%\n\n# Web scrape the bike price\nbike_price_tbl <- html_home %>%\n  \n  # Get the nodes\n  html_nodes(css = \".catalog-category-bikes__content\") %>%\n  html_nodes(css = \".catalog-category-bikes__price-title\") %>%\n  html_text() %>%\n  \n  # Convert vector to tibble\n  enframe(name = \"position\", value = \"bike_price_text\") %>%\n  \n  mutate(bike_price_text = gsub('\\n                                                ab ', '', bike_price_text)) %>%\n  mutate(bike_price_text = gsub('\\n                                            ', '', bike_price_text))\n\n  \n\nbike_tbl <- left_join(bike_name_tbl, bike_price_tbl)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Joining with `by = join_by(position)`\n```\n:::\n\n```{.r .cell-code}\nbike_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"position\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"bike_name\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"bike_price_text\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"1\",\"2\":\"COUNT SOLO\",\"3\":\"749,00 €\"},{\"1\":\"2\",\"2\":\"PSYCHO PATH\",\"3\":\"1.499,00 €\"},{\"1\":\"3\",\"2\":\"THRILL HILL\",\"3\":\"2.999,00 €\"},{\"1\":\"4\",\"2\":\"ROOT MILLER PLUS\",\"3\":\"4.999,00 €\"},{\"1\":\"5\",\"2\":\"GROUND CONTROL\",\"3\":\"1.999,00 €\"},{\"1\":\"6\",\"2\":\"ROOT MILLER\",\"3\":\"2.299,00 €\"},{\"1\":\"7\",\"2\":\"BONERO\",\"3\":\"1.499,00 €\"},{\"1\":\"8\",\"2\":\"SOUL FIRE\",\"3\":\"2.599,00 €\"},{\"1\":\"9\",\"2\":\"THE BRUCE\",\"3\":\"899,00 €\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}